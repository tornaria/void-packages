From 5f492e3b7f45e65e8db8ae74d6b3aee20912a14b Mon Sep 17 00:00:00 2001
From: Jonathan Kliem <jonathan.kliem@fu-berlin.de>
Date: Fri, 24 Dec 2021 11:56:56 +0100
Subject: fix alignment on 32-bit machines

---
 src/sage/data_structures/bitset_intrinsics.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/sage/data_structures/bitset_intrinsics.h b/src/sage/data_structures/bitset_intrinsics.h
index f55b6bd..88ac659 100644
--- a/src/sage/data_structures/bitset_intrinsics.h
+++ b/src/sage/data_structures/bitset_intrinsics.h
@@ -29,7 +29,7 @@ const mp_bitcnt_t LIMB_SIZE = sizeof(mp_limb_t);
 #elif __SSE4_1__
     const mp_bitcnt_t ALIGNMENT = 16;
 #else
-    const mp_bitcnt_t ALIGNMENT = 8;
+    const mp_bitcnt_t ALIGNMENT = LIMB_SIZE;
 #endif
 
 // We assume that ``GMP_LIMB_BITS`` is a divisor of 64
-- 
cgit v1.0-1-gd88e


From 179a508cb136b860d6ef36410811f07a14658492 Mon Sep 17 00:00:00 2001
From: Jonathan Kliem <jonathan.kliem@fu-berlin.de>
Date: Sun, 26 Dec 2021 19:13:16 +0100
Subject: work around an issue with ubuntu-bionic

---
 src/sage/data_structures/bitset_intrinsics.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/sage/data_structures/bitset_intrinsics.h b/src/sage/data_structures/bitset_intrinsics.h
index 88ac659..c21f5e2 100644
--- a/src/sage/data_structures/bitset_intrinsics.h
+++ b/src/sage/data_structures/bitset_intrinsics.h
@@ -29,7 +29,7 @@ const mp_bitcnt_t LIMB_SIZE = sizeof(mp_limb_t);
 #elif __SSE4_1__
     const mp_bitcnt_t ALIGNMENT = 16;
 #else
-    const mp_bitcnt_t ALIGNMENT = LIMB_SIZE;
+    const mp_bitcnt_t ALIGNMENT = sizeof(mp_limb_t);
 #endif
 
 // We assume that ``GMP_LIMB_BITS`` is a divisor of 64
-- 
cgit v1.0-1-gd88e


From 177903138d0403be7c7cb303de2bc0a0e0b6793c Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Gonzalo=20Tornar=C3=ADa?= <tornaria@cmat.edu.uy>
Date: Sun, 26 Dec 2021 23:26:12 -0300
Subject: fix a test on 32-bit machines

---
 .../geometry/polyhedron/combinatorial_polyhedron/list_of_faces.pyx   | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/src/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.pyx b/src/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.pyx
index 69a659c..0478b6c 100644
--- a/src/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.pyx
+++ b/src/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.pyx
@@ -156,10 +156,11 @@ cdef class ListOfFaces:
             sage: from memory_allocator.test import TestMemoryAllocator
             sage: t = TestMemoryAllocator()
             sage: m = t.size_t_max()
+            # The following is only certain to fail on 64-bit
             sage: ListOfFaces(1, m, 1)
-            Traceback (most recent call last):
+            Traceback (most recent call last):          # 64-bit
             ...
-            MemoryError: failed to allocate ...
+            MemoryError: failed to allocate ...         # 64-bit
         """
         face_list_free(self.data)
 
-- 
cgit v1.0-1-gd88e

